<div class="cabinet-container">
  <p-toast></p-toast>
  <p-confirmDialog></p-confirmDialog>

  <p-toolbar class="cabinet-toolbar">
    <div class="p-toolbar-group-start">
      <i class="pi pi-briefcase" style="font-size: 1.5rem; margin-right: 0.5rem; color: #667eea;"></i>
      <span class="toolbar-title">My Schemas</span>
    </div>

    <div class="p-toolbar-group-end">
      <span class="user-email">{{ userEmail }}</span>
      <p-button
        icon="pi pi-sign-out"
        label="Sign Out"
        (onClick)="signOut()"
        severity="secondary"
        [text]="true">
      </p-button>
    </div>
  </p-toolbar>

  <div class="cabinet-content">
    <p-card>
      <ng-template pTemplate="header">
        <div class="card-header-content">
          <h3>Your Schemas</h3>
          <p-button
            icon="pi pi-plus"
            label="New Schema"
            (onClick)="createNewSchema()"
            size="small">
          </p-button>
        </div>
      </ng-template>

      <p-table
        [value]="schemas"
        [loading]="loading"
        [scrollable]="true"
        scrollHeight="calc(100vh - 300px)"
        styleClass="schemas-table">
        <ng-template pTemplate="header">
          <tr>
            <th>Schema ID</th>
            <th>Properties Count</th>
            <th>Last Updated</th>
            <th style="width: 200px">Actions</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-schema>
          <tr>
            <td>{{ schema.id }}</td>
            <td>{{ schema.properties.length }}</td>
            <td>{{ formatDate(schema.updatedAt) }}</td>
            <td>
              <p-button
                icon="pi pi-folder-open"
                label="Open"
                (onClick)="openSchema(schema.id)"
                size="small"
                [outlined]="true"
                styleClass="mr-2">
              </p-button>
              <p-button
                icon="pi pi-trash"
                (onClick)="deleteSchema(schema)"
                severity="danger"
                size="small"
                [outlined]="true">
              </p-button>
            </td>
          </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="4" class="empty-state">
              <i class="pi pi-inbox" style="font-size: 3rem; color: #ccc;"></i>
              <p>No schemas found</p>
              <p-button
                icon="pi pi-plus"
                label="Create Your First Schema"
                (onClick)="createNewSchema()"
                size="small">
              </p-button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </p-card>
  </div>
</div>
